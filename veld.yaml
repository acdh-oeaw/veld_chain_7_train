x-veld:
  chain:
    scope:
      - "ETL"

services:
  veld:
    extends:
      file: "./veld_executable_7_train_spacy_ner/veld.yaml"
      service: veld
    volumes:
      - ./spacy_docbin/:/veld/input/
    depends_on:
      veld_convert:
        condition: service_completed_successfully

  veld_convert:
    extends:
      file: "./veld_executable_6_convert_apis_ner_to_spacy_docbin/veld.yaml"
      service: veld
    volumes:
      - ./veld_data_5_apis_ner_conll2003/json/cleaned/apis_ner__simplified_entities.json:/veld/input/data.json
      - ./spacy_docbin/:/veld/output/1/
      - ./:/veld/output/2/
    # TODO: Look into passing CLI args as env variables perhaps?
#    command: python /veld/executable/convert.py --train 80 --dev 10 --eval 10  --seed 42
    command: echo convert